<script>
	handler = Gmaps.build('Google');
	handler.buildMap({ 
		provider: {
			disableDefaultUI: true, 
			zoom: 10,
			<% if user_signed_in? && !current_user.client_profile.nil? %>
				// user is signed in but not subscribed
				center: new google.maps.LatLng(<%= current_user.client_profile.latitude %>, <%= current_user.client_profile.longitude %>)
			<% elsif user_signed_in? && current_user.manager? %>
				// user is a manager
				center: new google.maps.LatLng(<%= @gym.latitude %>, <%= @gym.longitude %>)
			<% else %>
			  // just set the center as the first of whatever gyms came in
				center: new google.maps.LatLng(<%= @gyms.first.latitude %>, <%= @gyms.first.longitude %>)
			<% end %>
		}, 
		internal: {id: 'map'}}, function(){
	  markers = handler.addMarkers(<%=raw @hash.to_json %>);
	  handler.bounds.extendWith(markers);
	  handler.fitMapToBounds();
	});
</script>